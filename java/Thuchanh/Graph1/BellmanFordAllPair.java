/**Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
Thỏa mãn điều kiện tối ưu
0 đến 0 ( 0.00)  
1 đến 0 ( 2.21)  1->3  0.29   3->6  0.52   6->0  1.40   
2 đến 0 ( 2.59)  2->7  0.34   7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   6->0  1.40   
3 đến 0 ( 1.92)  3->6  0.52   6->0  1.40   
4 đến 0 ( 2.62)  4->7  0.37   7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   6->0  1.40   
5 đến 0 ( 2.53)  5->1  0.32   1->3  0.29   3->6  0.52   6->0  1.40   
6 đến 0 ( 1.40)  6->0  1.40   
7 đến 0 ( 2.25)  7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   6->0  1.40   
0 đến 1 ( 0.64)  0->2  0.26   2->7  0.34   7->5 -0.28   5->1  0.32   
1 đến 1 ( 0.00)  
2 đến 1 ( 0.38)  2->7  0.34   7->5 -0.28   5->1  0.32   
3 đến 1 ( 0.70)  3->6  0.52   6->2 -0.20   2->7  0.34   7->5 -0.28   5->1  0.32   
4 đến 1 ( 0.41)  4->7  0.37   7->5 -0.28   5->1  0.32   
5 đến 1 ( 0.32)  5->1  0.32   
6 đến 1 ( 0.18)  6->2 -0.20   2->7  0.34   7->5 -0.28   5->1  0.32   
7 đến 1 ( 0.04)  7->5 -0.28   5->1  0.32   
0 đến 2 ( 0.26)  0->2  0.26   
1 đến 2 ( 0.61)  1->3  0.29   3->6  0.52   6->2 -0.20   
2 đến 2 ( 0.00)  
3 đến 2 ( 0.32)  3->6  0.52   6->2 -0.20   
4 đến 2 ( 1.02)  4->7  0.37   7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   6->2 -0.20   
5 đến 2 ( 0.93)  5->1  0.32   1->3  0.29   3->6  0.52   6->2 -0.20   
6 đến 2 (-0.20)  6->2 -0.20   
7 đến 2 ( 0.65)  7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   6->2 -0.20   
0 đến 3 ( 0.93)  0->2  0.26   2->7  0.34   7->5 -0.28   5->1  0.32   1->3  0.29   
1 đến 3 ( 0.29)  1->3  0.29   
2 đến 3 ( 0.67)  2->7  0.34   7->5 -0.28   5->1  0.32   1->3  0.29   
3 đến 3 ( 0.00)  
4 đến 3 ( 0.70)  4->7  0.37   7->5 -0.28   5->1  0.32   1->3  0.29   
5 đến 3 ( 0.61)  5->1  0.32   1->3  0.29   
6 đến 3 ( 0.47)  6->2 -0.20   2->7  0.34   7->5 -0.28   5->1  0.32   1->3  0.29   
7 đến 3 ( 0.33)  7->5 -0.28   5->1  0.32   1->3  0.29   
0 đến 4 ( 0.38)  0->4  0.38   
1 đến 4 ( 1.02)  1->3  0.29   3->6  0.52   6->2 -0.20   2->7  0.34   7->5 -0.28   5->4  0.35   
2 đến 4 ( 0.41)  2->7  0.34   7->5 -0.28   5->4  0.35   
3 đến 4 ( 0.73)  3->6  0.52   6->2 -0.20   2->7  0.34   7->5 -0.28   5->4  0.35   
4 đến 4 ( 0.00)  
5 đến 4 ( 0.35)  5->4  0.35   
6 đến 4 ( 0.21)  6->2 -0.20   2->7  0.34   7->5 -0.28   5->4  0.35   
7 đến 4 ( 0.07)  7->5 -0.28   5->4  0.35   
0 đến 5 ( 0.32)  0->2  0.26   2->7  0.34   7->5 -0.28   
1 đến 5 ( 0.67)  1->3  0.29   3->6  0.52   6->2 -0.20   2->7  0.34   7->5 -0.28   
2 đến 5 ( 0.06)  2->7  0.34   7->5 -0.28   
3 đến 5 ( 0.38)  3->6  0.52   6->2 -0.20   2->7  0.34   7->5 -0.28   
4 đến 5 ( 0.09)  4->7  0.37   7->5 -0.28   
5 đến 5 ( 0.00)  
6 đến 5 (-0.14)  6->2 -0.20   2->7  0.34   7->5 -0.28   
7 đến 5 (-0.28)  7->5 -0.28   
0 đến 6 ( 1.45)  0->2  0.26   2->7  0.34   7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   
1 đến 6 ( 0.81)  1->3  0.29   3->6  0.52   
2 đến 6 ( 1.19)  2->7  0.34   7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   
3 đến 6 ( 0.52)  3->6  0.52   
4 đến 6 ( 1.22)  4->7  0.37   7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   
5 đến 6 ( 1.13)  5->1  0.32   1->3  0.29   3->6  0.52   
6 đến 6 ( 0.00)  
7 đến 6 ( 0.85)  7->5 -0.28   5->1  0.32   1->3  0.29   3->6  0.52   
0 đến 7 ( 0.60)  0->2  0.26   2->7  0.34   
1 đến 7 ( 0.95)  1->3  0.29   3->6  0.52   6->2 -0.20   2->7  0.34   
2 đến 7 ( 0.34)  2->7  0.34   
3 đến 7 ( 0.66)  3->6  0.52   6->2 -0.20   2->7  0.34   
4 đến 7 ( 0.37)  4->7  0.37   
5 đến 7 ( 0.28)  5->7  0.28   
6 đến 7 ( 0.14)  6->2 -0.20   2->7  0.34   
7 đến 7 ( 0.00)  */

// một mảng các đối tượng BellmanFordOD(tất cả các đỉnh đến 1 đích)
public class BellmanFordAllPair
{
    BellmanFordSPToOD [] bellmanfordSP_onedestination;
    
    public BellmanFordAllPair(){
        
    }
    
    /** giải quyết vấn đề bằng một mảng các đích từ bài toán BellmanFordSPToOneDestination*/
    public void solve (EdgeWeightedDigraph_T G)
    {
        bellmanfordSP_onedestination = new BellmanFordSPToOD[G.V()]; 
        
        for(int s = 0; s < G.V(); s++)
        {
            bellmanfordSP_onedestination[s] = new BellmanFordSPToOD(G, s);
        }
            
    }
    /**hiển thị kết quả bài toán
     đưa ra danh sách moij đỉnh đến mọi đích hoặc chu trình âm nếu có*/
    public void display(){
        for(int s=0 ; s < bellmanfordSP_onedestination.length; s++){
            BellmanFordSPToOD sp = bellmanfordSP_onedestination[s];
            if (sp.hasNegativeCycle()) {
            StdOut.printf("chu trình âm: \n");
            for (DirectedEdge e : sp.negativeCycle())
                StdOut.println(e);
        }

        // in các đường đi ngắn nhất
        else {
            for (int v = 0; v < bellmanfordSP_onedestination.length; v++) {
                if (sp.hasPathTo(v)) {
                    StdOut.printf("%d đến %d (%5.2f)  ", v, s, sp.distTo(v));
                    for (DirectedEdge e : sp.pathTo(v)) {
                        StdOut.print(e + "   ");
                    }
                    StdOut.println();
                }
                else {
                    StdOut.printf("%d đến %d           không có đường đi\n", v, s);
                }
            }
        }

        }
    }
    /** kiểm thử*/ 
    public static void main(String args[]){
        In in = new In(args[0]);
        EdgeWeightedDigraph_T G= new EdgeWeightedDigraph_T(in);
        BellmanFordAllPair bfa = new BellmanFordAllPair();
        bfa.solve(G);
        bfa.display();
    }
    
}
